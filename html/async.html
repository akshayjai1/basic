<html>
  <body>
    <h1>Async Code</h1>
    <input type="text" name="tweet" placeholder="write tweet" />
    <button onclick="postTweet()">Send Tweet</button>
    <div class="data">loading data</div>
  </body>
  <script>
    console.log("in file async code");
    const input = document.querySelector("[name=tweet]");
    function postTweet() {
      console.log("hi");
      const text = input.value;
      const textBody = {
        text,
      };
      const textBodyJSN = JSON.stringify(textBody);
      debugger;
      fetch("http://localhost:65500/postTweet", {
        method: "POST",
        body: textBodyJSN,
        headers: {
          "Content-Type": "application/json; charset=UTF-8",
        },
      })
        .then((res) => {
          console.log(res);
          debugger;
          return res.json();
        })
        .then((data) => {
          console.log("finally got response tweets", data);
          document.querySelector(".data").textContent = JSON.stringify(data);
        })
        .catch((e) => {
          console.log("got error", e);
        });
    }
  </script>
  <script src="../js/asyncCode.js" type="type/javascript"></script>
  <!-- <script src="../js/asyncCode.js" type="text/javascript"></script> -->
</html>
